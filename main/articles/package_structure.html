<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Package Structure • mmrm</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Package Structure">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125641273-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125641273-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mmrm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.15.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Package Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/methodological_introduction.html">Mixed Models for Repeated Measures</a></li>
    <li><a class="dropdown-item" href="../articles/mmrm_review_methods.html">Comparison with other software</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Covariance Structures</h6></li>
    <li><a class="dropdown-item" href="../articles/covariance.html">Covariance Structures</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Degrees of Freedom and Testing</h6></li>
    <li><a class="dropdown-item" href="../articles/hypothesis_testing.html">Details of Hypothesis Testing</a></li>
    <li><a class="dropdown-item" href="../articles/between_within.html">Between-Within</a></li>
    <li><a class="dropdown-item" href="../articles/kenward.html">Kenward-Roger</a></li>
    <li><a class="dropdown-item" href="../articles/satterthwaite.html">Satterthwaite</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Coefficient Covariance</h6></li>
    <li><a class="dropdown-item" href="../articles/coef_vcov.html">Coefficients Covariance Matrix Adjustment</a></li>
    <li><a class="dropdown-item" href="../articles/empirical_wls.html">Details of Weighted Least Square Empirical Covariance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Algorithm Details</h6></li>
    <li><a class="dropdown-item" href="../articles/algorithm.html">Model Fitting Algorithm</a></li>
    <li><a class="dropdown-item" href="../articles/predict.html">Prediction and Simulation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developers</h6></li>
    <li><a class="dropdown-item" href="../articles/package_structure.html">Package Structure</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
  </ul>
</li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.15">v0.3.15</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.14">v0.3.14</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.13">v0.3.13</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.12">v0.3.12</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.11">v0.3.11</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.10">v0.3.10</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.7">v0.3.7</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.6">v0.3.6</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.5">v0.3.5</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.4">v0.3.4</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.3">v0.3.3</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.2">v0.3.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.1">v0.3.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.3.0">v0.3.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/mmrm/v0.2.2">v0.2.2</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openpharma/mmrm"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Package Structure</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/openpharma/mmrm/blob/main/vignettes/package_structure.Rmd" class="external-link"><code>vignettes/package_structure.Rmd</code></a></small>
      <div class="d-none name"><code>package_structure.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>As <code>mmrm</code> package is built on <code>TMB</code> with
complex structure, it might be hard for new developers to onboard. To
make it easier for new developers to join, this documentation is
created.</p>
</div>
<div class="section level2">
<h2 id="package-structures">Package Structures<a class="anchor" aria-label="anchor" href="#package-structures"></a>
</h2>
<p><code>mmrm</code> is an R package, and the following sections
describe all files/folders that are contained in this package as well as
the repository.</p>
<div class="section level3">
<h3 id="data">
<code>data</code><a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>The <code>data/</code> folder is where <code>mmrm</code> example data
sets is stored. See the documentation for <a href="https://openpharma.github.io/mmrm/main/reference/fev_data.html"><code>fev_data</code></a>
and <a href="https://openpharma.github.io/mmrm/main/reference/bcva_data.html"><code>bcva_data</code></a>
for details.</p>
</div>
<div class="section level3">
<h3 id="data-raw">
<code>data-raw</code><a class="anchor" aria-label="anchor" href="#data-raw"></a>
</h3>
<p>The <code>data-raw/</code> folder contains source code to produce
simulated example data sets. Currently it contains
<code>bcva_data.R</code> (and its associated helper file) producing the
<code>bcva_data</code> data set, and the cached results for comparing
mmrm and other implementations.</p>
</div>
<div class="section level3">
<h3 id="design">
<code>design</code><a class="anchor" aria-label="anchor" href="#design"></a>
</h3>
<p>The <code>design/</code> folder is where design documents, prototype
scripts and SAS code for comparisons are stored. When we have a new idea
for a specific implementations, we can add our design doc including
prototype implementations in an <code>Rmd</code> file in this
folder.</p>
<p>Note that this folder is not part of the actual R package but only
part of the git repository. Different folders contain R scripts and
<code>Rmd</code> files for different topics, for example:</p>
<div class="section level4">
<h4 id="sas">
<code>SAS</code><a class="anchor" aria-label="anchor" href="#sas"></a>
</h4>
<p>The <code>design/SAS/</code> folder contains programs to run MMRM
models in SAS and the corresponding SAS outputs. The results will be
used for integration tests (see <a href="../CONTRIBUTING.html#add-integration-tests">integration
tests</a>).</p>
</div>
<div class="section level4">
<h4 id="tmb">
<code>TMB</code><a class="anchor" aria-label="anchor" href="#tmb"></a>
</h4>
<p>The <code>design/TMB/</code> folder is where prototypes of the first
<code>mmrm</code> implementations with <code>TMB</code> are stored.</p>
</div>
</div>
<div class="section level3">
<h3 id="inst">
<code>inst</code><a class="anchor" aria-label="anchor" href="#inst"></a>
</h3>
<p>Files in the <code>inst/</code> folder will be kept after
installation of the R package.</p>
<ul>
<li>
<code>jss.csl</code> is specifying the Journal of Statistical
Software citation style used by <code>Rdpack</code> references.</li>
<li>
<code>REFERENCES.bib</code> keeps a list of all referenced
literature.</li>
<li>
<code>WORDLIST</code> is kept up-to-date for all non-English words,
allowing the package to pass a spell-checker.</li>
</ul>
</div>
<div class="section level3">
<h3 id="man">
<code>man</code><a class="anchor" aria-label="anchor" href="#man"></a>
</h3>
<p>The <code>man/</code> folder contains all function documentation
generated by <code>roxygen2</code>. Please do not edit any file in this
folder, otherwise you may run into problems.</p>
</div>
<div class="section level3">
<h3 id="namespace">
<code>NAMESPACE</code><a class="anchor" aria-label="anchor" href="#namespace"></a>
</h3>
<p>Since we use <code>roxygen2</code> also the <code>NAMESPACE</code>
file is automatically generated and usually does not need to be edited
manually.</p>
<p>Note that there can be exceptions, e.g. when removing a previously
exported function from the package, in which case a manual deletion of
the corresponding entry might be necessary to unblock
<code>roxygen2</code>.</p>
</div>
<div class="section level3">
<h3 id="news-md">
<code>NEWS.md</code><a class="anchor" aria-label="anchor" href="#news-md"></a>
</h3>
<p>This file lists the user facing changes (new features, bug fixes,
etc.) and should be updated during the development and cleaned before
each release. It is important for the user experience to understand the
changes between the releases.</p>
</div>
<div class="section level3">
<h3 id="r">
<code>R</code><a class="anchor" aria-label="anchor" href="#r"></a>
</h3>
<p>This folder contains all the source code written in R, just like
every other R packages. Please refer to the <a href="https://openpharma.github.io/mmrm/main/reference/">documentation
page</a> for details of the user facing API.</p>
</div>
<div class="section level3">
<h3 id="readme">
<code>README</code><a class="anchor" aria-label="anchor" href="#readme"></a>
</h3>
<p>We use the <code>Rmd</code> file <code>README.Rmd</code> and knit
this to the corresponding <code>md</code> file. This file specifies the
landing page on the <code>pkgdown</code> website and the GitHub
repository and should hence be nice, succinct and clean.</p>
</div>
<div class="section level3">
<h3 id="simulations">
<code>simulations</code><a class="anchor" aria-label="anchor" href="#simulations"></a>
</h3>
<p>This folder contains simulation scripts and results to compare
<code>mmrm</code> with other software or modifications in
<code>mmrm</code>. Please refer to the <code>README</code> files in the
subfolders for details.</p>
</div>
<div class="section level3">
<h3 id="src">
<code>src</code><a class="anchor" aria-label="anchor" href="#src"></a>
</h3>
<p>This folder includes all the source code written in <code>C++</code>,
either using <code>Rcpp</code> or <code>TMB</code> frameworks.</p>
<div class="section level4">
<h4 id="chol_cache-h">
<code>chol_cache.h</code><a class="anchor" aria-label="anchor" href="#chol_cache-h"></a>
</h4>
<p>This file contains classes for caching the Cholesky factorizations
efficiently.</p>
</div>
<div class="section level4">
<h4 id="covariance-h">
<code>covariance.h</code><a class="anchor" aria-label="anchor" href="#covariance-h"></a>
</h4>
<p>This file includes the implementations of covariance structures with
suitable parameterization, and the calculation of lower triangular part
of Cholesky factorization of the covariance matrix.</p>
<p>For more about the implementations and why Cholesky factorization is
needed, see the <a href="algorithm.html#covariance-matrix-model">model
fitting algorithm</a> vignette.</p>
<p>For more about covariance structures, see the <a href="covariance.html">covariance structures</a> vignette.</p>
</div>
<div class="section level4">
<h4 id="derivatives-h">
<code>derivatives.h</code><a class="anchor" aria-label="anchor" href="#derivatives-h"></a>
</h4>
<p>This file contains classes to enable automatic differentiation
calculation which are important for the coefficient covariance matrix
calculations and Kenward-Roger and Satterthwaite degrees of freedom
calculations.</p>
</div>
<div class="section level4">
<h4 id="empirical-cpp">
<code>empirical.cpp</code><a class="anchor" aria-label="anchor" href="#empirical-cpp"></a>
</h4>
<p>This file implements the coefficient covariance matrix
calculations.</p>
</div>
<div class="section level4">
<h4 id="exports-cpp">
<code>exports.cpp</code><a class="anchor" aria-label="anchor" href="#exports-cpp"></a>
</h4>
<p>This file contains the <code>Rcpp</code> interfaces to the
coefficient covariance matrix, Kenward-Roger, Jacobian and prediction
calculations.</p>
</div>
<div class="section level4">
<h4 id="jacobian-cpp">
<code>jacobian.cpp</code><a class="anchor" aria-label="anchor" href="#jacobian-cpp"></a>
</h4>
<p>This file implements the Jacobian calculations which are needed for
the Satterthwaite degrees of freedom.</p>
</div>
<div class="section level4">
<h4 id="kr_comp-cpp">
<code>kr_comp.cpp</code><a class="anchor" aria-label="anchor" href="#kr_comp-cpp"></a>
</h4>
<p>This file implements the <code>P</code>, <code>Q</code> and
<code>R</code> matrix calculations which are needed for the
Kenward-Roger degrees of freedom.</p>
</div>
<div class="section level4">
<h4 id="makevars">
<code>Makevars</code><a class="anchor" aria-label="anchor" href="#makevars"></a>
</h4>
<p>This file specifies additional flags used in the source code
compilation. We ask <code>TMB</code> to use the <code>TMB</code>
automatic differentiation framework (instead of the default
<code>CppAD</code> framework) to be more efficient, and disable useless
warnings from the <code>Eigen</code> library compilation.</p>
<p>Note that additional flags such as
<code>-Wno-ignored-attributes</code> cannot be included here because
they are compiler specific. These can instead be specified in local
<code>~/.R/Makevars</code> files.</p>
</div>
<div class="section level4">
<h4 id="mmrm-cpp">
<code>mmrm.cpp</code><a class="anchor" aria-label="anchor" href="#mmrm-cpp"></a>
</h4>
<p>This file is the core part where the likelihood is calculated. The
objective function reads input from R and performs the calculations
inside.</p>
</div>
<div class="section level4">
<h4 id="predict-cpp">
<code>predict.cpp</code><a class="anchor" aria-label="anchor" href="#predict-cpp"></a>
</h4>
<p>This file implements the prediction calculations.</p>
</div>
<div class="section level4">
<h4 id="test-files">test files<a class="anchor" aria-label="anchor" href="#test-files"></a>
</h4>
<p>Files starting with <code>test-</code> are tests or helper files to
run tests. (It is important to also aim for high unit test coverage of
the source code.)</p>
</div>
<div class="section level4">
<h4 id="tmb-cpp-and-tmb_includes-h">
<code>tmb.cpp</code> and <code>tmb_includes.h</code><a class="anchor" aria-label="anchor" href="#tmb-cpp-and-tmb_includes-h"></a>
</h4>
<p>These two files includes the TMB module.</p>
</div>
<div class="section level4">
<h4 id="utils-h">
<code>utils.h</code><a class="anchor" aria-label="anchor" href="#utils-h"></a>
</h4>
<p>This files includes utilities that used internally.</p>
</div>
</div>
<div class="section level3">
<h3 id="tests">
<code>tests</code><a class="anchor" aria-label="anchor" href="#tests"></a>
</h3>
<p>The <code>tests/</code> folder includes all the unit tests for the R
functions, using the <code>testthat</code> package.</p>
</div>
<div class="section level3">
<h3 id="vignettes">
<code>vignettes</code><a class="anchor" aria-label="anchor" href="#vignettes"></a>
</h3>
<p>The <code>vignettes/</code> folder includes <code>Rmd</code>
documentation files to helps the user understand more about the usage,
detail, etc. These vignettes are rendered into <code>.html</code> files
which are deployed on the package website.</p>
</div>
<div class="section level3">
<h3 id="other-files">Other files<a class="anchor" aria-label="anchor" href="#other-files"></a>
</h3>
<p>There are other files that can be helpful in package development and
are used in <code>mmrm</code>.</p>
<div class="section level4">
<h4 id="pkgdown-yml">
<code>_pkgdown.yml</code><a class="anchor" aria-label="anchor" href="#pkgdown-yml"></a>
</h4>
<p>This file is the configuration file for our
<code>pkgdown</code>-based website. <code>pkgdown</code> is used to
covert our package documentation (<code>man/</code>,
<code>vignettes/</code>) into our package website.</p>
<p>For more, visit <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown
documentation</a>.</p>
</div>
<div class="section level4">
<h4 id="gitignore">
<code>.gitignore</code><a class="anchor" aria-label="anchor" href="#gitignore"></a>
</h4>
<p>This file will specify untracked files/file patterns that git should
ignore.</p>
</div>
<div class="section level4">
<h4 id="lintr">
<code>.lintr</code><a class="anchor" aria-label="anchor" href="#lintr"></a>
</h4>
<p>This file serves as configuration for <code>lintr</code> to do the
static code analysis. Please install <code>lintr</code> package in your
developing system to enable the analysis. It will provide you
information about errors, style issues, etc.</p>
<p>For more, visit <a href="https://lintr.r-lib.org/" class="external-link">lintr
documentation</a>.</p>
</div>
<div class="section level4">
<h4 id="pre-commit-config-yaml">
<code>.pre-commit-config.yaml</code><a class="anchor" aria-label="anchor" href="#pre-commit-config-yaml"></a>
</h4>
<p>This file includes the configurations that we use for
<code>pre-commit</code>. <code>pre-commit</code> is a tool that help us
identify simple issues before we submit our code. For more, visit <a href="https://pre-commit.com/" class="external-link">pre-commit documentation</a>.</p>
</div>
<div class="section level4">
<h4 id="rbuildignore">
<code>.Rbuildignore</code><a class="anchor" aria-label="anchor" href="#rbuildignore"></a>
</h4>
<p>This file specifies which files and folders in the repository should
not be included when building the R package.</p>
<p>Please note that it is important to know that these are regular
expressions. Hence, when we want to specify an exact file name we need
to use e.g. the <code>^cache$</code> format, just using
<code>cache</code> instead could match additional files or folders with
<code>cache</code> being part of the name. This can lead to
problems.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Sabanes Bove, Liming Li, Julia Dedic, Doug Kelkhoff, Kevin Kunzmann, Brian Matthew Lang, Christian Stock, Ya Wang, Dan James, Jonathan Sidi, Daniel Leibovitz, Daniel D. Sjoberg, Nikolas Ivan Krieger, Boehringer Ingelheim Ltd., Gilead Sciences, Inc., F. Hoffmann-La Roche AG, Merck Sharp &amp; Dohme, Inc., AstraZeneca plc, inferential.biostatistics GmbH.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
